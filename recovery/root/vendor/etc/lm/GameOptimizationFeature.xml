<!--
/******************************************************************************
  @file    GameOptimizationFeature.xml
  @brief   Game Optimization feature xml

  DESCRIPTION
      Each feature has an xml file to define the feature components

  ===========================================================================
  Copyright (c) 2019 Qualcomm Technologies, Inc.
  All Rights Reserved.
  Confidential and Proprietary - Qualcomm Technologies, Inc.
  ===========================================================================
******************************************************************************/
-->
<!--
    Follows "Data goes into elements, metadata goes into attributes"
 -->

<Feature>
    <Name>GameOptimization</Name>
    <Libname>libgameoptfeature.so</Libname>
    <Configs>
        <Enable>1</Enable>
        <MIN_DDR_FREQ>1144</MIN_DDR_FREQ>
        <MAX_MIN_DDR_FREQ>2086</MAX_MIN_DDR_FREQ>
    </Configs>
    <Profiles>
        <Profile>
            <!-- Default Enable Colocation v3,
                               sched_min_task_util_for_boost 51,
                               sched_min_task_util_for_colocation 35
                               BIG min_cpus 2 -->
            <DEFAULT>0x40C7C000,51,0x40C78000,35,0x41000000,2</DEFAULT>
             <!-- For Games disable Colocation v3,
                                sched_min_task_util_for_boost 0,
                                sched_min_task_util_for_colocation 0
                                BIG min_cpus 3 -->
            <SKEW2>0x40C7C000,0,0x40C78000,0,0x41000000,3</SKEW2>
        </Profile>
    </Profiles>

    <Meters>
        <SamplesRequired>4</SamplesRequired>
        <Meter>
            <Name>MinDDR</Name>
            <Triggers>
                <Trigger>
                   <Primary>true</Primary>
                   <AsyncId>VENDOR_HINT_APP_WORKLOAD_TYPE</AsyncId>
                   <AsyncType>1</AsyncType>
                </Trigger>

                <Trigger>
                   <Primary>true</Primary>
                   <AsyncId>VENDOR_HINT_TAP_EVENT</AsyncId>
                   <AsyncType>-1</AsyncType>
                </Trigger>

                <Trigger>
                   <Primary>true</Primary>
                   <AsyncId>VENDOR_HINT_ACTIVITY_START</AsyncId>
                   <AsyncType>-1</AsyncType>
                </Trigger>

                <Trigger>
                    <Primary>true</Primary>
                    <AsyncId>VENDOR_HINT_ACTIVITY_PAUSE</AsyncId>
                    <AsyncType>-1</AsyncType>
                </Trigger>

                <Trigger>
                    <Primary>true</Primary>
                    <AsyncId>VENDOR_HINT_ACTIVITY_RESUME</AsyncId>
                    <AsyncType>-1</AsyncType>
                </Trigger>

                <Trigger>
                   <Primary>true</Primary>
                   <AsyncId>VENDOR_HINT_ACTIVITY_STOP</AsyncId>
                   <AsyncType>-1</AsyncType>
                </Trigger>

                <Trigger>
                   <Primary>true</Primary>
                   <AsyncId>VENDOR_HINT_WORKLOAD_HEAVY</AsyncId>
                   <AsyncType>1</AsyncType>
                </Trigger>

            </Triggers>
            <Configs>
                <MEMLAT_FREQ_VOTE_LITTLE_PATH>/sys/class/devfreq/soc:qcom,cpu0-llcc-ddr-lat/cur_freq</MEMLAT_FREQ_VOTE_LITTLE_PATH>
                <MEMLAT_FREQ_VOTE_BIG_PATH>/sys/class/devfreq/soc:qcom,cpu6-llcc-ddr-lat/cur_freq</MEMLAT_FREQ_VOTE_BIG_PATH>
                <MEMLAT_AVAIL_FREQ_LITTLE_PATH>/sys/class/devfreq/soc:qcom,cpu0-llcc-ddr-lat/available_frequencies</MEMLAT_AVAIL_FREQ_LITTLE_PATH>
            </Configs>
            <Samples>100</Samples>
        </Meter>

        <Meter>
            <Name>Fps</Name>
            <Triggers>
                <Trigger>
                   <Primary>true</Primary>
                   <AsyncId>VENDOR_HINT_APP_WORKLOAD_TYPE</AsyncId>
                   <AsyncType>1</AsyncType>
                </Trigger>

                <Trigger>
                   <Primary>true</Primary>
                   <AsyncId>VENDOR_HINT_TAP_EVENT</AsyncId>
                   <AsyncType>-1</AsyncType>
                </Trigger>

                <Trigger>
                   <Primary>true</Primary>
                   <AsyncId>VENDOR_HINT_ACTIVITY_START</AsyncId>
                   <AsyncType>-1</AsyncType>
                </Trigger>

                <Trigger>
                    <Primary>true</Primary>
                    <AsyncId>VENDOR_HINT_ACTIVITY_PAUSE</AsyncId>
                    <AsyncType>-1</AsyncType>
                </Trigger>

                <Trigger>
                    <Primary>true</Primary>
                    <AsyncId>VENDOR_HINT_ACTIVITY_RESUME</AsyncId>
                    <AsyncType>-1</AsyncType>
                </Trigger>

                <Trigger>
                   <Primary>true</Primary>
                   <AsyncId>VENDOR_HINT_ACTIVITY_STOP</AsyncId>
                   <AsyncType>-1</AsyncType>
                </Trigger>

            </Triggers>
            <Configs>
                <FPS_NODE>/sys/class/drm/sde-crtc-0/measured_fps</FPS_NODE>
                <FPS_PERIODICITY_NODE>/sys/class/drm/sde-crtc-0/fps_periodicity_ms</FPS_PERIODICITY_NODE>
            </Configs>
            <Samples>100</Samples>
        </Meter>
    </Meters>
</Feature>
